import streamlit as st
from openai import OpenAI
import os

# Configurar cliente
client = OpenAI(api_key=os.getenv("sk-...2XoA"))

st.title("PLATINUM â€” Assistente Inteligente ğŸ’¬")
st.header("Para sua felicidade")

st.text("""== LISTA DE TRABALHO ==
1) gp1 = R$40 (2h)
2) gp2 = R$35 (3h)
3) gp3 = R$50 (1h)
4) gp4 = R$80 (5h)
""")

# Entrada do usuÃ¡rio
preÃ§o = st.text_input("Digite sua opÃ§Ã£o (gp1, gp2, gp3 ou gp4):")

# Condicionais simples
if preÃ§o:
    preÃ§o = preÃ§o.lower().strip()

    if preÃ§o == "gp1":
        resposta = "VocÃª escolheu gp1 â€” R$40, 2 horas."
    elif preÃ§o == "gp2":
        resposta = "VocÃª escolheu gp2 â€” R$35, 3 horas."
    elif preÃ§o == "gp3":
        resposta = "VocÃª escolheu gp3 â€” R$50, 1 hora."
    elif preÃ§o == "gp4":
        resposta = "VocÃª escolheu gp4 â€” R$80, 5 horas."
    else:
        resposta = "OpÃ§Ã£o invÃ¡lida. Digite gp1, gp2, gp3 ou gp4."

    st.write(resposta)

# === ğŸ”® AGENTE DE IA ===
st.subheader("Converse com o assistente inteligente ğŸ§ ")

pergunta = st.text_area("Pergunte algo sobre os serviÃ§os:")

if st.button("Perguntar Ã  IA"):
    if pergunta.strip() != "":
        with st.spinner("Pensando..."):
            chat = client.chat.completions.create(
                model="gpt-4o-mini",  # ou gpt-4o, gpt-5, etc
                messages=[
                    {"role": "system", "content": "VocÃª Ã© um assistente da empresa PLATINUM que ajuda clientes a escolher serviÃ§os."},
                    {"role": "user", "content": pergunta},
                ]
            )
            resposta_ia = chat.choices[0].message.content
            st.success(resposta_ia)
